<%@ page session="true" language="java" contentType="text/html; charset=euc-kr" pageEncoding="euc-kr"%><%/*** 프로젝트명	: 하도급거래 서면실태조사 지원을 위한 개발용역 사업* 프로그램명	: Oent_Violate_26.jsp* 프로그램설명	: 원사업자 > 조사결과분석 > 업체별 위반현황* 프로그램버전	: 1.0.1* 최초작성일자	: 2009년 05월* 작 성 이 력       :*=========================================================*	작성일자		작성자명				내용*=========================================================*	2009-05-00	정광식       최초작성*   2011-10-18   정광식		웹관리툴 리뉴얼*	2016-01-05	민현근		DB변경으로 인한 인코딩 변경*	2018-07-02	김보선		현재 메뉴에 맞게 메뉴 value 값 수정*/%><%@ page import="java.sql.*"%><%@ page import="java.util.*"%><%@ page import="ftc.util.*"%><%@ page import="ftc.db.ConnectionResource"%><%@ page import="ftc.db.ConnectionResource2"%><%@ page import="java.text.DecimalFormat"%><%@ include file="/hado/wTools/inc/WB_I_Global.jsp"%><%@ include file="/hado/wTools/inc/WB_I_chkMngSession.jsp"%><%/*---------------------------------------- Variable Difinition ----------------------------------------*/	int sStartYear=2000;	session.setAttribute("sgb",StringUtil.checkNull(request.getParameter("sgb")).trim());	session.setAttribute("wgb",StringUtil.checkNull(request.getParameter("wgb")).trim());	session.setAttribute("scomp",new String(StringUtil.checkNull(request.getParameter("scomp")).trim().getBytes("EUC-KR"), "ISO8859-1" ));	String q_Name = StringUtil.checkNull(request.getParameter("mName"));	DecimalFormat formater=new java.text.DecimalFormat("###,###,###,###,###,###,###,###");	int currentYear=st_Current_Year_n;	int ni=0;	String sSQLs = "";	ConnectionResource resource=null;	Connection conn=null;	PreparedStatement pstmt=null;	ResultSet rs=null;	// 제조 업종배열	ArrayList arrDCode=new ArrayList();	ArrayList arrDName=new ArrayList();	// 건설 업종배열	ArrayList arrCCode=new ArrayList();	ArrayList arrCName=new ArrayList();	// 용역 업종배열	ArrayList arrSrvCode=new ArrayList();	ArrayList arrSrvName=new ArrayList();/*-----------------------------------------------------------------------------------------------------*//*=================================== Record Selection Processing =====================================*/	try {		resource=new ConnectionResource();		conn=resource.getConnection();		// 제조 업종 배열 생성		sSQLs="SELECT COMMON_CD, COMMON_NM FROM COMMON_CD WHERE ADDON_GB='1'";		pstmt=conn.prepareStatement(sSQLs);		rs=pstmt.executeQuery();		while (rs.next()) {			arrDCode.add(StringUtil.checkNull(rs.getString("COMMON_CD")).trim());			arrDName.add(new String( StringUtil.checkNull(rs.getString("COMMON_NM")).trim().getBytes("ISO8859-1"), "EUC-KR" ));		}		arrDCode.add("end");		rs.close();		// 건설 업종 배열 생성		sSQLs="SELECT COMMON_CD, COMMON_NM FROM COMMON_CD WHERE ADDON_GB='2'";		pstmt=conn.prepareStatement(sSQLs);		rs=pstmt.executeQuery();	  		while (rs.next()) {			arrCCode.add(StringUtil.checkNull(rs.getString("COMMON_CD")).trim());			arrCName.add(new String( StringUtil.checkNull(rs.getString("COMMON_NM")).trim().getBytes("ISO8859-1"), "EUC-KR" ));		}		arrCCode.add("end");		rs.close();		// 용역 업종 배열 생성		sSQLs="SELECT COMMON_CD, COMMON_NM FROM COMMON_CD WHERE ADDON_GB='3'";		pstmt=conn.prepareStatement(sSQLs);		rs=pstmt.executeQuery();	  		while (rs.next()) {			arrSrvCode.add(StringUtil.checkNull(rs.getString("COMMON_CD")).trim());			arrSrvName.add(new String(StringUtil.checkNull(rs.getString("COMMON_NM")).trim().getBytes("ISO8859-1"), "EUC-KR" ));		}		arrSrvCode.add("end");		rs.close();	} catch(Exception e) {		e.printStackTrace();	} finally {		if ( rs != null )		try{rs.close();}	catch(Exception e) {		}		if ( pstmt != null )	try{pstmt.close();}	catch(Exception e) {		}		if ( conn != null )		try{conn.close();}	catch(Exception e) {		}		if ( resource != null ) resource.release();	}%><%!public String isselected(String str1, String str2) {	String sReturnStr="";	if(str1 != null && str2 != null && str1.equals(str2) ) {		sReturnStr=" selected";	}	return sReturnStr;}%><html><head>	<title>【관리】하도급거래 서면실태조사</title>	<link rel="stylesheet" href="/hado/hado/wTools/style.css" type="text/css">	<meta charset="euc-kr">	<script language="javascript" type="text/javascript" src="/hado/hado/wTools/inc/ajax_layer.js"></script>	<script language="javascript" type="text/javascript" src="/hado/hado/wTools/inc/common_script.js"></script>	<script type="text/JavaScript">	//<![CDATA[		nNowProcess=0;			function setNowProcessFalse() {			nNowProcess=0;			bodyview();		}			function goSearch() {			var frm=document.searchform;			msg="";				if(nNowProcess == 0) {				frm.target="procFrame";				frm.action="Oent_Violate_26_proc.jsp?comm=search";				frm.submit();				nNowProcess=1;				bodyhidden();			} else {				alert("현재 프로세스가 실행중입니다.\n\n잠시 후 다시 실행해 주세요.");			}		}			var sSearchWin="0";			function divSearchWin() {			obj=document.getElementById("searchbox");			wobj=document.getElementById("divSrchWindow");				if( sSearchWin =="0" ) {				obj.style.display='none';				wobj.innerHTML="<a href='javascript:divSearchWin();' class='sbutton'>검색창 펼치기</a>";				sSearchWin="1";			} else {				obj.style.display='';				wobj.innerHTML="<a href='javascript:divSearchWin();' class='sbutton'>검색창 가리기</a>";				sSearchWin="0";			}		}		var dcd=new Array();	var dnm=new Array();		<%ni=0;	while( !arrDCode.get(ni).equals("end") ) {		out.print("dcd["+ni+"]='"+arrDCode.get(ni)+"';");		out.print("dnm["+ni+"]='"+arrDName.get(ni)+"';");		ni++;	}	%>			var ccd=new Array();	var cnm=new Array();		<%ni=0;	while( !arrCCode.get(ni).equals("end") ) {		out.print("ccd["+ni+"]='"+arrCCode.get(ni)+"';");		out.print("cnm["+ni+"]='"+arrCName.get(ni)+"';");		ni++;	}	%>			var srvcd=new Array();	var srvnm=new Array();		<%ni=0;	while( !arrSrvCode.get(ni).equals("end") ) {		out.print("srvcd["+ni+"]='"+arrSrvCode.get(ni)+"';");		out.print("srvnm["+ni+"]='"+arrSrvName.get(ni)+"';");		ni++;	}	%>			function gbsel(main) {		initsel()		switch(main.wgb.selectedIndex) {			case 0:				main.sgb.options[0]=new Option("전체","");				for(i=0;i<dcd.length;i++) {					var op1=new Option(dnm[i],dcd[i]);					main.sgb.options[i+1]=op1;					}				break;			case 1:				main.sgb.options[0]=new Option("전체","");				for(i=0;i<srvcd.length;i++) {					var op1=new Option(srvnm[i],srvcd[i]);					main.sgb.options[i+1]=op1;					}				break;		}	}		function initsel() {		for(i=0;i<document.searchform.sgb.length;i++) {			document.searchform.sgb.options[0]=null;		}		if(document.searchform.wgb.selectedIndex == 0)			document.searchform.sgb.options[0]=new Option("원사업자 구분을 선택하세요","");	}			function sviolatef() {			var frm = document.searchform;			msg = "";				var lyView=document.getElementById("divView");				if(nNowProcess == 0) {				frm.target="procFrame";				frm.action="Oent_Violate_26s.jsp";				frm.submit();				nNowProcess = 1;				bodyhidden();				lyView.style.top=Math.round(( getDocumentHeight()+getVerticalScroll()-60 )/6)+"px";				lyView.style.display="block";			} else {				alert("현재 프로세스가 실행중입니다.\n\n잠시 후 다시 실행해 주세요.");			}		}			function selectf(val, val1, val2) {			var frm=document.searchform;			frm.violatecomp.value = all_replace(val,"_"," ");			frm.violatecompno.value = val1;			closeViewWin('divView');		}			function clearoentf() {			var frm=document.searchform;			frm.violatecomp.value = "";			frm.violatecompno.value = "";		}	//]]	</script></head><body>	<div id="ajax_ready" style="position:absolute;top:1px;left:1px;width:60px;height:60px;display:none;z-index:99;"><img src="/hado/hado/wTools/img/ajax_ani.gif" border="0"></div>	<div id="ajax_bg" style="position:absolute;top:1px;left:1px;display:none;background:url(/hado/hado/wTools/img/ajax_bg.gif);z-index:51;"></div>	<div id="container">		<!-- Begin Header -->		<%@ include file="/hado/wTools/inc/WB_I_pageTop.jsp"%>		<!-- End Header -->		<!-- Begin Main-menu -->		<jsp:include page="/hado/wTools/inc/WB_I_topMenu.jsp">		<jsp:param value="02" name="sel"/>		</jsp:include>		<!-- End Main-menu -->		<!-- Begin Contents -->		<div id="wrapper">			<div id="contents">				<!-- Begin Left-menu -->				<%//2018-07-02 김보선 현재 메뉴에 맞게 value 값 수정 %>				<jsp:include page="/hado/wTools/inc/WB_I_Oent_LMenu.jsp">				<jsp:param value="039" name="sel"/>				</jsp:include>				<!-- End Left-menu -->				<div id="divContent">					<div id="searchContent">						<li class="subtitle">업체별 위반현황</li>						<li class="whereiam">HOME > 원사업자 > 조사결과분석 > 업체별 위반현황</li>						<p></p>					</div>						<div class="searchbox" id="searchbox">						<table class="searchboxtable">						<form action="won.jsp?comm=search" method="post" name="searchform">							<tr>								<th>조사년도</th>								<td>									<select name="cyear">										<%for(int xx=sStartYear; xx<=st_Current_Year_n; xx++) {										String tmpCYear=""+xx;%>											<option value="<%=xx%>" <%if( xx==st_Current_Year_n ){%>selected<%}%>><%=xx%>년</option>										<%}%>									</select>								</td>								<th>원사업자구분</th>								<td>									<select name="wgb" onchange="gbsel(this.form)">										<option value="1">제조</option>										<option value="2">건설</option>										<option value="3">용역</option>									</select>								</td>								<th>거래차수</th>								<td>									<select name="tradest">										<option value="">전체</option>										<option value="0">원사업자</option>										<option value="1">1차 협력사</option>										<option value="2">2차 협력사</option>										<option value="3">3차 협력사</option>										<option value="4">거래단계모름</option>									</select>								</td>							<tr>								<th>원사업자명</th>								<td><input type="text" name="violatecomp" value="" class="s_input"></td>								<th>원사업자코드</th>								<td><input type="text" name="violatecompno" value="" class="s_input"></td>								<td colspan="2">									<li class="fl lt"><a href="javascript:sviolatef();" class="sbutton">원사업자검색</a></li>									<li class="fl lt"><a href="javascript:clearoentf();" class="sbutton">검색초기화</a></li>								</td>							</tr>							</form>						</table>						<table class="searchboxtable">							<tr><td><font style="color:#FF9933;font-size:9pt;">* 거래차수는 2011년 부터 반영되었습니다.</font></td></tr>						</table>					</div>					<div id="divButton">						<ul class="lt">							<li class="fr" id="divSrchWindow"><a href="javascript:divSearchWin();" class="sbutton">검색창 가리기</a></li>							<li class="fr"><a href="javascript:goSearch();" class="sbutton">검 색</a></li>						</ul>					</div>					<div id="divResult" style="position:absolute;top:145px;z-index:59;background-color:#ffffff;">					</div>					<div id="divView" onMouseDown="f_DragMDown(this)">					</div>				</div>				<iframe src="about:blank" width="1" height="1" id="procFrame" name="procFrame" style="display:none;"></iframe>			</div>		</div>		<!-- End Contents -->		<!-- Begin Footer -->		<%@ include file="/hado/wTools/inc/WB_I_Copyright.jsp"%>		<!-- End Footer -->	</div></body></html>